

<div id="slideshow-1" class="{{ spark_class }}">
    {% if header %}
        <h1>
            {{ header }}
        </h1>
    {% endif %}
    <div 	id="cycle-1" 
    		class="cycle-slideshow" 
    		data-cycle-slides="> div" 
    		data-cycle-timeout="0"
            data-cycle-fx="scrollHorz" 
    		data-cycle-prev="#slideshow-1 .cycle-prev" 
    		data-cycle-next="#slideshow-1 .cycle-next" 
            data-cycle-pager="#thumbnail-pager > div" 
            data-cycle-pager-template=""
    		style="position: relative;">

    	{% for slide in feed %}
    	<div class="cycle-slide">
            <div class="text">
                <span class="caption">{{ slide.caption }}</span>
                <span class="count">{{ loop.index }}/{{ loop.length }}</span>
            </div>
    		<img src="{{ slide.image.url }}"/>
    	</div>
    	{% endfor %}    
</div>

<div id="thumbnail-pager">
    <div 	id="cycle-2" 
    		class="cycle-slideshow" 
    		data-cycle-timeout="0" 
    		data-cycle-prev="#slideshow-2 .cycle-prev" 
    		data-cycle-next="#slideshow-2 .cycle-next" 
    		data-cycle-caption="#slideshow-2 .custom-caption" 
    		data-cycle-fx="carousel" 
    		data-cycle-carousel-visible="5" 
    		data-cycle-carousel-fluid="true" 
    		data-allow-wrap="false" 
    		>


        {% for slide in feed %}
        <div class="cycle-slide">
            <img src="{{ slide.image.sizes.thumbnail }}"/>
            
        </div>
        {% endfor %}  
        
    </div>
</div>

<script>

	jQuery(document).ready(function($){

		var slideshows = $('.cycle-slideshow').on('cycle-next cycle-prev', function(e, opts) {
		    // advance the other slideshow
		    slideshows.not(this).cycle('goto', opts.currSlide);
		});

		$('#cycle-2 .cycle-slide').click(function(){
		    var index = $('#cycle-2').data('cycle.API').getSlideIndex(this);
		    slideshows.cycle('goto', index);
		});

	});

</script>